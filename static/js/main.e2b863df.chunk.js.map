{"version":3,"sources":["js/panels/main/Base.js","js/panels/profile/Profile.js","App.js","index.js"],"names":["images","layerStyle","backgroundColor","position","top","left","width","height","touchStyle","backgroundPosition","backgroundSize","boxShadow","UserPicStyle","backgroundRepeat","overflow","margin","padding","divContainerInterests","display","flexWrap","justifyContent","alignContent","Cards","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","id","userInterests","addPair","user","users","rot","loading","moveBack","shiftX","shiftY","debugInfo","limitOffset","userPicBackgroundColor","sizeX","sizeY","halfX","minchange","popout","startX","startY","renderInterests","bind","assertThisInitialized","onMove","refreshUsers","onEnd","getUsers","setState","window","innerWidth","innerHeight","e","rotation","t","react_default","a","createElement","es6","axios","get","concat","then","x","JSON","stringify","data","catch","_this2","deb","Math","abs","agree","disAgree","first_name","model","currentUserId","choicedUserId","choiced","post","newPair","splice","length","showAlert","setTimeout","el","circleRef","title","text","closeText","_this3","actions","autoclose","onClose","ages","ageFromPreference","ageToPreference","sexPreference","sex","reason","undefined","searchReason","birthDate","Date","now","age","getFullYear","setFullYear","date","bdate","years","birthDateToAge","interests","listItem","forEach","isCool","find","push","level","component","style","marginTop","marginRight","objectSpread","lineHeight","_this$state","activePanel","transformOrigin","transition","transform","textAlign","last_name","getYo","getSex","getSexPreference","getReason","backgroundImage","onClick","_this$state2","_this$state3","React","Component","Profile","activeModal","openInterestsModal","saveUserSettings","deNorm","userSettings","renderUserInterests","setActiveModal","getInterests","renderModalInterests","initInterests","deleteInterestFromCurrentUser","after","cancel_default","userId","interestId","_this4","addInterestToCurrentUser","add_default","target","value","_this5","originalUserSettings","modal1","settlingHeight","header","IS_PLATFORM_ANDROID","right","IS_PLATFORM_IOS","done_default","onInput","placeholder","modal","size","before","src","photo_max_orig","showAddInterestsModal","paddingBottom","toString","min","max","step","defaultValue","onChange","name","stretched","res","App","debug","activeStory","view","panel","pairs","history","debugServerInfo","onStoryChange","inited","connect","subscribe","detail","type","response","console","log","send","c","currentTarget","dataset","newPairs","tabbar","selected","data-view","user_default","users_default","label","message_default","settings_default","profile_Profile","Base","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e2b863df.chunk.js","sourcesContent":["\r\nimport React from 'react';\r\nimport { PanelHeader, Group, Tooltip,  Touch, List, Alert, View, Panel, Div, Button, ScreenSpinner } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css'\r\nimport axios from 'axios';\r\nconst images = {\r\n\tgirl:\"https://www.big-ben.ru/sites/default/files/reviews/mo.png\",\r\n\tboy: \"https://lh3.googleusercontent.com/XtyURW0mKNnKu_6TzQ5_WpuKF4A7M1oFV6p828eVEWIvTZPtZz2gq5sNM78jpNPMMRmZ\"\r\n};\r\nconst layerStyle = {\r\n\tbackgroundColor: 'rgba(248, 247, 216, 0.1)',\r\n\tposition: 'absolute',\r\n\ttop: 0,\r\n\tleft: 0,\r\n\twidth: '100%',\r\n\theight: '100%',\r\n\t//transition: 'background-color .3s'\r\n}\r\n// eslint-disable-next-line\r\nconst userTwoStyle = {\r\n\tpadding: 0,\r\n\tbackgroundColor: '#f8f8f8',\r\n}\r\nconst touchStyle = {\r\n\tposition: 'absolute',\r\n\tbackgroundColor: '#f8f8f8',\r\n\tbackgroundPosition: 'center',\r\n\tbackgroundSize: '90%',\r\n\tboxShadow: '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)'\r\n\r\n}\r\nconst UserPicStyle = {\r\n\tbackgroundSize: 'contain',\r\n\tbackgroundRepeat: 'no-repeat',\r\n\toverflow: 'hidden',\r\n\tbackgroundPosition: 'center',\r\n\tmargin: 0,\r\n\tpadding: 0\r\n}\r\nconst divContainerInterests = {\r\n\tdisplay:'flex',\r\n\tflexWrap: 'wrap',\r\n\tjustifyContent:'space-around',\r\n\talignContent:'right'\r\n}\r\nclass Cards extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tid: props.id,\r\n\t\t\tuserInterests: props.userInterests,\r\n\t\t\taddPair: props.addPair,\r\n\t\t\tuser: props.user,\r\n\t\t\tusers: [],\r\n\t\t\trot: 0,\r\n\t\t\tloading: false,\r\n\t\t\tmoveBack: 0.1,\r\n\t\t\tshiftX: 0,\r\n\t\t\tshiftY: 0,\r\n\t\t\tdebugInfo: '',\r\n\t\t\tlimitOffset: 3,\r\n\t\t\tuserPicBackgroundColor: '',\r\n\t\t\tsizeX: 390,\r\n\t\t\tsizeY: 900,\r\n\t\t\thalfX: 390 / 10,\r\n\t\t\tminchange: 2,\r\n\t\t\tpopout: null\r\n\t\t}\r\n\t\tthis.startX = 0;\r\n\t\tthis.startY = 0;\r\n\t\tthis.renderInterests = this.renderInterests.bind(this);\r\n\r\n\t\tthis.onMove = this.onMove.bind(this);\r\n\t\tthis.refreshUsers = this.refreshUsers.bind(this);\r\n\t\tthis.onEnd = this.onEnd.bind(this);\r\n\t\tthis.getUsers = this.getUsers.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({ sizeX: window.innerWidth, sizeY: window.innerHeight });\r\n\t\tthis.getUsers();\r\n\t}\r\n\r\n\tonMove(e) {\r\n\t\tlet shiftX = this.startX + e.shiftX;\r\n\t\tlet rotation = shiftX / this.state.halfX;\r\n\t\tthis.setState({\r\n\t\t\trot: rotation,\r\n\t\t\tmoveBack: 0.1,\r\n\t\t\tshiftX: shiftX\r\n\t\t});\r\n\t}\r\n\tgetUsers(e) {\r\n\t\tvar t = this;\r\n\t\tt.setState({ popout: <ScreenSpinner /> });\r\n\t\taxios.get(`https://salert.info/user/GetUsers/${this.state.user.id}`\r\n\t\t).then((x) => {\r\n\t\t\tt.setState({ popout: null, debugInfo: `done-${JSON.stringify(x.data)}`, users: x.data });\r\n\t\t}).catch(function (x) {\r\n\t\t\tt.setState({ popout: null, debugInfo: 'Ошибка ' + JSON.stringify(x) });\r\n\t\t});\r\n\t}\r\n\tonEnd(e) {\r\n\t\tvar deb = this.state.debugInfo;\r\n\t\tvar users = this.state.users;\r\n\t\tif (Math.abs(this.state.rot) < this.state.limitOffset) {\r\n\t\t\tthis.setState({ rot: 0, moveBack: 0.5, shiftX: 0, shiftY: 0 });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.agree || this.disAgree) {\r\n\t\t\tif (this.agree) {\r\n\r\n\t\t\t\tdeb += `+${this.state.users[0].first_name}`;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdeb += `-${this.state.users[0].first_name}`;\r\n\t\t\t}\r\n\t\t\tvar model = {\r\n\t\t\t\tcurrentUserId: this.state.user.id,\r\n\t\t\t\tchoicedUserId: users[0].id,\r\n\t\t\t\tchoiced: this.agree\r\n\t\t\t};\r\n\t\t\tvar t = this;\r\n\t\t\tvar rotation = t.state.rot > 0 ? 15 : -15;\r\n\t\t\tthis.setState({ userPicBackgroundColor: '', rot: rotation, debugInfo: deb, moveBack: 0.1, shiftX: 0, shiftY: 0 });\r\n\r\n\t\t\taxios.post('https://salert.info/user/SetChoice', model).then((x) => {\r\n\t\t\t\tif (x.data === true) {\r\n\t\t\t\t\tvar newPair = users[0];\r\n\t\t\t\t\tt.state.addPair(newPair);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tusers.splice(0, 1);\r\n\r\n\t\t\t\tt.setState({ rot: 0, users: users, moveBack: 0 });\r\n\t\t\t\tif (users.length === 0) {\r\n\t\t\t\t\tt.getUsers();\r\n\t\t\t\t}\r\n\t\t\t\t//this.showAlert(\"\",JSON.stringify(users),\"\");\r\n\r\n\t\t\t}).catch(function (x) {\r\n\t\t\t\tt.showAlert(\"Ошибка\", JSON.stringify(x), \"\");\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar rotation = this.state.rot > 0 ? 15 : -15;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tusers = users.splice(0, 1);\r\n\t\t\t\tthis.setState({ rot: 0, users: users, moveBack: 0 });\r\n\t\t\t}, 100)\r\n\t\t}\r\n\t}\r\n\trefreshUsers(e) {\r\n\t\tthis.getUsers();\r\n\t}\r\n\r\n\tgetCircleRef(el) { this.circleRef = el };\r\n\r\n\tget agree() {\r\n\t\tconst { shiftX, limitOffset } = this.state;\r\n\t\treturn Math.abs(shiftX) > limitOffset && shiftX > 0;\r\n\t}\r\n\tget disAgree() {\r\n\t\tconst { shiftX, limitOffset } = this.state;\r\n\t\treturn Math.abs(shiftX) > limitOffset && shiftX < 0;\r\n\t}\r\n\tshowAlert(title, text, closeText) {\r\n\t\tthis.setState({\r\n\t\t\tpopout:\r\n\t\t\t\t<Alert\r\n\t\t\t\t\tactions={[{\r\n\t\t\t\t\t\ttitle: closeText,\r\n\t\t\t\t\t\tautoclose: true,\r\n\t\t\t\t\t}]}\r\n\t\t\t\t\tonClose={(e) => { this.setState({ popout: null }) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<h2>{title}</h2>\r\n\t\t\t\t\t<p>{text}</p>\r\n\t\t\t\t</Alert>\r\n\t\t});\r\n\t}\r\n\tgetSexPreference(user) {\r\n\t\tvar ages = user.ageFromPreference?` от ${user.ageFromPreference}`:'';\r\n\t\tages += user.ageToPreference?` до ${user.ageToPreference}`:'';\r\n\r\n\t\tvar preference = user.sexPreference == 0 ? `хоть кого ${ages}` : user.sexPreference == 1 ? `женщиу ${ages}` : `мужчину ${ages}`;\r\n\t\treturn preference;\r\n\t}\r\n\tgetSex(user) {\r\n\t\tvar sex = user.sex == 0 ? \"не указан\" : user.sex == 1 ? \"женский\" : \"мужской\";\r\n\t\treturn sex;\r\n\t}\r\n\tgetReason(user) {\r\n\t\tvar reason;\r\n\t\tif (user.searchReason == undefined) {\r\n\t\t\treturn \"неизвестно вообще чего\";\r\n\t\t}\r\n\t\tswitch (user.searchReason) {\r\n\t\t\tcase 0: reason = \"общения\"; break;\r\n\t\t\tcase 1: reason = \"дружбы\"; break;\r\n\t\t\tcase 2: reason = \"любви\"; break;\r\n\t\t\tcase 3: reason = \"секса\"; break;\r\n\t\t\tdefault: reason = \"неизвестно вообще чего\"; break;\r\n\t\t}\r\n\t\treturn reason;\r\n\t}\r\n\tbirthDateToAge(birthDate) {\r\n\t\tbirthDate = new Date(birthDate);\r\n\t\tvar now = new Date(), age = now.getFullYear() - birthDate.getFullYear();\r\n\r\n\r\n\r\n\t\treturn now.setFullYear(1972) < birthDate.setFullYear(1972) ? age - 1 : age;\r\n\r\n\t}\r\n\r\n\tgetYo(user) {\r\n\t\tvar date  = new Date(user.bdate + \"Z\");\r\n\t\tvar years = this.birthDateToAge(date);\r\n\t\treturn `${date.getFullYear()}, ${years} лет`;\r\n\t}\r\n\trenderInterests(interests) {\r\n\t\tvar listItem;// eslint-disable-next-line\r\n\t\tlistItem = [];\r\n\t\tvar userInterests = this.state.userInterests;\r\n\t\tvar count = 0;\r\n\t\tif (interests != undefined) {\r\n\t\t\tinterests.forEach((e) => {\r\n\t\t\t\tvar isCool = userInterests.find((x) => { return x.id === e.id });\t\t\t\t\r\n\t\t\t\tlistItem.push(<Button level={isCool?\"primary\":\"secondary\"} component=\"span\" style={{marginTop:5, marginRight:3}}>{e.title}</Button>);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlistItem = <b>Нет интересов</b>\r\n\t\t}\r\n\t\treturn <Div style={{ lineHeight: '2.5', ...divContainerInterests }}> {listItem}</Div>\r\n\t\t\t\r\n\t\t\r\n\t};\r\n\r\n\r\n\trender() { // eslint-disable-next-line\r\n\t\tconst { id, popout, users, sizeX, sizeY, moveBack, debugInfo, userPicBackgroundColor, rot } = this.state;\r\n\t\tconst user = users[0];\r\n\t\treturn (\r\n\t\t\t<View id={id} activePanel={id} popout={popout}>\r\n\t\t\t\t<Panel id={id} style={{ overflow: 'hidden' }}>\r\n\t\t\t\t\t<PanelHeader>{rot} New</PanelHeader>\r\n\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t{users.length !== 0 && users[0] !== undefined &&\r\n\t\t\t\t\t\t\t<Touch\r\n\t\t\t\t\t\t\t\tonMove={this.onMove}\r\n\t\t\t\t\t\t\t\tonEnd={this.onEnd}\r\n\r\n\t\t\t\t\t\t\t\tstyle={{ ...touchStyle, transformOrigin: `center ${sizeY * 3}px`, width: sizeX, height: sizeY, transition: `transform ${moveBack}s ease-out`, transform: `rotate(${rot}deg)` }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Div style={{ height: '100%', padding: 0 }}>\r\n\t\t\t\t\t\t\t\t\t<div style={{ ...layerStyle, backgroundColor: userPicBackgroundColor, }}></div>\r\n\t\t\t\t\t\t\t\t\t<Div>\r\n\t\t\t\t\t\t\t\t\t<h1 style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t\t\t<strong>{user.first_name} {user.last_name}</strong>\r\n\t\t\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t\t\t<h5>{this.getYo(user)}</h5>\r\n\t\t\t\t\t\t\t\t\t<h5>Пол {this.getSex(user)}, ищет {this.getSexPreference(user)} для {this.getReason(user)}</h5>\r\n\t\t\t\t\t\t\t\t\t</Div>\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<Div style={{ ...UserPicStyle, width: sizeX, height: sizeY / 4, backgroundImage: `url(${user.sex ==1?images.girl:images.boy})` }}></Div>\r\n\r\n\t\t\t\t\t\t\t\t\t{this.renderInterests(user.interests)}\r\n\r\n\t\t\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t\t\t</Touch>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{/*users.length !== 0 && users[1] !== undefined &&\r\n\t\t\t\t\t\t<Div style={{ ...userTwoStyle, height: sizeY }}>\r\n\t\t\t\t\t\t\t<Div style={{ ...UserPicStyle, width: sizeX, height: sizeY / 2, backgroundImage: `url(${image})` }}></Div>\r\n\t\t\t\t\t\t\t<h1 style={{ textAlign: 'center' }}>\r\n\t\t\t\t\t\t\t\t<strong>{users[1].first_name} {users[1].last_name}</strong>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t\t{this.renderInterests(users[1].interests)}\r\n\t\t\t\t\t\t</Div>\r\n\t\t\t\t\t*/}\r\n\t\t\t\t\t\t{users.length === 0 &&\r\n\t\t\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t\t\t<h1>Пока что больше нету :( Можешь попытаться обновить, но сейчас это не особо работает бро </h1>\r\n\t\t\t\t\t\t\t\t<Button onClick={this.refreshUsers}>Сбросить</Button>\r\n\t\t\t\t\t\t\t\t<Div>{debugInfo}</Div>\r\n\t\t\t\t\t\t\t</Group>\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Group>\r\n\r\n\t\t\t\t</Panel>\r\n\t\t\t</View>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Cards;","import React from 'react';\r\n// eslint-disable-next-line\r\nimport { Panel, Group, Button, Div, CellButton, Separator, FormLayoutGroup, RangeSlider, Radio, Alert, ListItem, Checkbox, Cell, FormLayout, List, HeaderButton, ModalPageHeader, ModalPage, View, ModalRoot, Avatar, PanelHeader, Input, Select, ScreenSpinner } from '@vkontakte/vkui';\r\nimport Icon16Add from '@vkontakte/icons/dist/16/add';\r\nimport Icon16Cancel from '@vkontakte/icons/dist/16/cancel';\r\nimport axios from 'axios';\r\nimport { IS_PLATFORM_ANDROID, IS_PLATFORM_IOS } from '@vkontakte/vkui/dist/lib/platform';\r\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\r\nimport '@vkontakte/vkui/dist/vkui.css'\r\nconst USER_INTERESTS_MODAL = 'user_interests';\r\nconst USER_MAXIMUM_INTERESTS = 10;\r\n\r\n\r\n\r\nclass Profile extends React.Component {\r\n\r\n\tconstructor(props) {\r\n\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tuserInterests: props.userInterests,\r\n\t\t\tactiveModal: null,\r\n\t\t\topenInterestsModal: props.openInterestsModal,\r\n\t\t\tsaveUserSettings:props.saveUserSettings,\r\n\t\t\tid: props.id,\r\n\t\t\tuser: props.user,\r\n\t\t\tinterests: [],\r\n\t\t\tdebugInfo: \"Тут дебаг\",\r\n\t\t\tdeNorm: \"Ну тесты\",\r\n\t\t\tpopout: null,\r\n\t\t\tuserSettings: props.userSettings\r\n\t\t}\r\n\t\tthis.renderUserInterests = this.renderUserInterests.bind(this);\r\n\t\tthis.setActiveModal = this.setActiveModal.bind(this);\r\n\t\tthis.getInterests = this.getInterests.bind(this);\r\n\t\tthis.renderModalInterests = this.renderModalInterests.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.initInterests();\r\n\t}\r\n\trenderUserInterests() {\r\n\t\tvar listItem = [];\r\n\t\tif (this.state.userInterests !== undefined && this.state.userInterests.length > 0) {\r\n\t\t\tthis.state.userInterests.forEach((e) => {\r\n\t\t\t\tlistItem.push(<Button style={{ marginRight: 5 }} onClick={() => this.deleteInterestFromCurrentUser(e.id)} after={<Icon16Cancel />}>{e.title}</Button>);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlistItem = <b>Нет интересов</b>\r\n\t\t}\r\n\t\treturn <Div\r\n\t\t\tstyle={{ padding: 10, lineHeight: '2.5' }}> {listItem}\r\n\t\t</Div>\r\n\t}\r\n\tshowAlert(title, text, closeText) {\r\n\t\tthis.setState({\r\n\t\t\tpopout:\r\n\t\t\t\t<Alert\r\n\t\t\t\t\tactions={[{\r\n\t\t\t\t\t\ttitle: closeText,\r\n\t\t\t\t\t\tautoclose: true,\r\n\t\t\t\t\t}]}\r\n\t\t\t\t\tonClose={(e) => { this.setState({ popout: null }) }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<h2>{title}</h2>\r\n\t\t\t\t\t<p>{text}</p>\r\n\t\t\t\t</Alert>\r\n\t\t});\r\n\t}\r\n\tshowAddInterestsModal() {\r\n\t\tif (this.state.userInterests.length < USER_MAXIMUM_INTERESTS) {\r\n\r\n\t\t\tthis.setActiveModal(USER_INTERESTS_MODAL);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.showAlert(\"Ошибка\", `Нельзя добавить более ${USER_MAXIMUM_INTERESTS} интересов`, \"Закрыть\");\r\n\t\t}\r\n\t}\r\n\tsetActiveModal(e) {\r\n\t\tthis.setState({ activeModal: e })\r\n\t}\r\n\taddInterestToCurrentUser(id) {\r\n\t\tif (this.state.userInterests.length < USER_MAXIMUM_INTERESTS) {\r\n\t\t\tvar t = this;\r\n\t\t\tthis.setState({ popout: <ScreenSpinner /> });\r\n\t\t\tvar model = {\r\n\t\t\t\tuserId: this.state.user.id,\r\n\t\t\t\tinterestId: id\r\n\t\t\t}\r\n\t\t\taxios.post(`https://salert.info/interests/AddInterest`, model\r\n\t\t\t).then((x) => {\r\n\t\t\t\tt.setState({ popout: null, debugInfo: `done-${JSON.stringify(x.data)}`, userInterests: x.data });\r\n\t\t\t}).catch(function (x) {\r\n\t\t\t\tt.setState({ popout: null, debugInfo: 'Ошибка ' + JSON.stringify(x) });\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setActiveModal(null);\r\n\t\t\tthis.showAlert(\"Ошибка\", \"Нельзя добавить более 10 интересов\", \"Закрыть\");\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteInterestFromCurrentUser(id) {\r\n\t\tvar t = this;\r\n\t\tvar model = {\r\n\t\t\tuserId: this.state.user.id,\r\n\t\t\tinterestId: id\r\n\t\t}\r\n\t\tthis.setState({ popout: <ScreenSpinner /> });\r\n\t\taxios.post(`https://salert.info/interests/DeleteInterest`, model\r\n\t\t).then((x) => {\r\n\t\t\tt.setState({ popout: null, debugInfo: `done-${JSON.stringify(x.data)}`, userInterests: x.data });\r\n\t\t}).catch(function (x) {\r\n\t\t\tt.setState({ popout: null, debugInfo: 'Ошибка ' + JSON.stringify(x) });\r\n\t\t});\r\n\t}\r\n\trenderModalInterests() {\r\n\t\tif (this.state.interests == null) {\r\n\t\t\treturn \"Нет результатов\"\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar listItem = [];\r\n\t\t\tthis.state.interests.forEach((e) => {\r\n\t\t\t\tif (this.state.userInterests && this.state.userInterests.find((x) => { return x.id === e.id }) !== undefined) {\r\n\t\t\t\t\tlistItem.push(<Button style={{ marginRight: 5 }} onClick={() => this.deleteInterestFromCurrentUser(e.id)} after={<Icon16Cancel />}>{e.title}</Button>);\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse {\r\n\t\t\t\t\tlistItem.push(<Button level=\"outline\" style={{ marginRight: 5 }} onClick={() => this.addInterestToCurrentUser(e.id)} after={<Icon16Add />}>{e.title}</Button>);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn <Div style={{ padding: 15, lineHeight: '2.5' }}>{listItem}</Div>\r\n\t\t}\r\n\t}\r\n\tinitInterests(e) {\r\n\t\tvar t = this;\r\n\t\taxios.get(`https://salert.info/interests/GetTopInterests`,\r\n\t\t).then((x) => {\r\n\t\t\tt.setState({ debugInfo: JSON.stringify(x.data), interests: x.data });\r\n\t\t}).catch(function (x) {\r\n\t\t\tt.setState({ debugInfo: 'Ошибка ' + JSON.stringify(x) });\r\n\t\t});\r\n\r\n\r\n\t}\r\n\tgetInterests(e) {\r\n\t\tif (e.target.value.length < 2) {\r\n\t\t\tthis.setState({ interests: null })\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar t = this;\r\n\t\t\taxios.get(`https://salert.info/interests/SearchFromQuery?str=${e.target.value}`,\r\n\t\t\t).then((x) => {\r\n\t\t\t\tt.setState({ debugInfo: JSON.stringify(x.data), interests: x.data });\r\n\t\t\t}).catch(function (x) {\r\n\t\t\t\tt.setState({ debugInfo: 'Ошибка ' + JSON.stringify(x) });\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\trender() { // eslint-disable-next-line\r\n\t\tconst { id, user, popout, saveUserSettings, activeModal,originalUserSettings, userSettings, userInterests, interests, deNorm } = this.state;\r\n\t\tconst modal1 =\r\n\t\t\t<ModalRoot activeModal={activeModal}>\r\n\t\t\t\t<ModalPage popout={popout}\r\n\t\t\t\t\tid={USER_INTERESTS_MODAL}\r\n\t\t\t\t\tsettlingHeight={100}\r\n\t\t\t\t\theader={\r\n\t\t\t\t\t\t<ModalPageHeader\r\n\t\t\t\t\t\t\tleft={IS_PLATFORM_ANDROID && <HeaderButton onClick={() => { this.setActiveModal(null) }}><Icon16Cancel /></HeaderButton>}\r\n\t\t\t\t\t\t\tright={<HeaderButton onClick={() => { this.setActiveModal(null) }}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\r\n\t\t\t\t\t\t>Фильтры</ModalPageHeader>\r\n\t\t\t\t\t}>\r\n\r\n\t\t\t\t\t<this.renderModalInterests></this.renderModalInterests>\r\n\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t<FormLayoutGroup top=\"Поиск\" onInput={(e) => { this.getInterests(e) }}>\r\n\t\t\t\t\t\t\t<Input placeholder=\"Начните вводить\" />\r\n\t\t\t\t\t\t</FormLayoutGroup>\r\n\t\t\t\t\t</FormLayout>\r\n\t\t\t\t</ModalPage>\r\n\t\t\t</ModalRoot>\r\n\r\n\t\treturn (\r\n\t\t\t<View id={id} popout={popout} modal={modal1} activePanel={id}>\r\n\t\t\t\t<Panel id={id} >\r\n\t\t\t\t\t<PanelHeader>\r\n\t\t\t\t\t\tПрофиль\r\n\t\t\t\t</PanelHeader>\r\n\t\t\t\t\t{user &&\r\n\t\t\t\t\t\t<Group title=\"Общие данные\">\r\n\t\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\t\tsize=\"m\"\r\n\t\t\t\t\t\t\t\tbefore={<Avatar src={user.photo_max_orig} size={80} />}>\r\n\t\t\t\t\t\t\t\t{user.first_name} {user.last_name}\r\n\r\n\t\t\t\t\t\t\t</Cell>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{user &&\r\n\t\t\t\t\t\t<Group title={`Интересы (${!userInterests ? 0 : userInterests.length}\\\\${USER_MAXIMUM_INTERESTS})`}>\r\n\t\t\t\t\t\t\t{userInterests &&\r\n\t\t\t\t\t\t\t\t<this.renderUserInterests></this.renderUserInterests>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t<Separator style={{ margin: '12px 0' }} />\r\n\t\t\t\t\t\t\t<CellButton onClick={() => { this.showAddInterestsModal() }} style={{ paddingBottom: 10 }} before={<Icon16Add />}> Добавить интересы</CellButton>\r\n\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{user &&\r\n\t\t\t\t\t\t<Group title={`Настройки поиска`}>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t<RangeSlider\r\n\t\t\t\t\t\t\t\t\ttop={`Возраст (от ${userSettings.ageFromPreference == null ? \"любого\" : userSettings.ageFromPreference.toString()} до ${userSettings.ageToPreference == null ? \"любого\" : userSettings.ageToPreference.toString()})`}\r\n\t\t\t\t\t\t\t\t\tmin={12}\r\n\t\t\t\t\t\t\t\t\tmax={115}\r\n\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\tdefaultValue={[userSettings.ageFromPreference == null ? 0 : userSettings.ageFromPreference, userSettings.ageToPreference == null ? 115 : userSettings.ageToPreference]}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => { \r\n\t\t\t\t\t\t\t\t\t\tuserSettings.ageFromPreference = (e[0] == 12 ? null : e[0]);\r\n\t\t\t\t\t\t\t\t\t\tuserSettings.ageToPreference = (e[1] == 115 ? null : e[1]);\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ userSettings: userSettings}) ;\r\n\t\t\t\t\t\t\t\t\t}}\r\n\r\n\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\ttop=\"Показывать мне...\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tuserSettings.sexPreference = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ userSettings: userSettings });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tvalue={userSettings.sexPreference}\r\n\t\t\t\t\t\t\t\t\tname=\"sexPreference\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value={0}>Всех</option>\r\n\t\t\t\t\t\t\t\t\t<option value={1}>Женщин</option>\r\n\t\t\t\t\t\t\t\t\t<option value={2}>Мужчин</option>\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t\t<FormLayout>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\ttop=\"Для...\"\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tuserSettings.searchReason = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ userSettings: userSettings })\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tvalue={userSettings.searchReason}\r\n\t\t\t\t\t\t\t\t\tname=\"searchReason\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<option value={0}>Общения</option>\r\n\t\t\t\t\t\t\t\t\t<option value={1}>Дружбы</option>\r\n\t\t\t\t\t\t\t\t\t<option value={2}>Любви</option>\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t<Div style={{ display:'flex' }}>\r\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" onClick={(e)=>{this.setState({userSettings:originalUserSettings})}} stretched level=\"destructive\">Сбросить</Button>\r\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" onClick={()=>{var res = saveUserSettings(userSettings); this.showAlert(JSON.stringify(res))}} stretched style={{ marginRight: 8 }}>Сохранить</Button>\r\n\t\t\t\t\t\t\t\t</Div>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</FormLayout>\r\n\t\t\t\t\t\t</Group>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Panel>\r\n\t\t\t</View>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Profile;","import Icon28User from '@vkontakte/icons/dist/28/user';\r\nimport Icon28Settings from '@vkontakte/icons/dist/28/settings';\r\nimport Icon28Message from '@vkontakte/icons/dist/28/message';\r\nimport Icon28Users from '@vkontakte/icons/dist/28/users';\r\nimport React from 'react';\r\nimport connect from '@vkontakte/vkui-connect';\r\nimport axios from 'axios';\r\nimport './css/props.css';\r\n// eslint-disable-next-line\r\nimport {\r\n  View, Div, PanelHeader, Epic, ModalRoot, ModalPage, ModalPageHeader, List, Cell, Avatar, HeaderButton, Group,\r\n  Tabbar, ScreenSpinner, Panel, TabbarItem\r\n} from '@vkontakte/vkui';\r\n// eslint-disable-next-line\r\nimport { IS_PLATFORM_ANDROID, IS_PLATFORM_IOS } from '@vkontakte/vkui/dist/lib/platform';\r\nimport '@vkontakte/vkui/dist/vkui.css'\r\nimport Cards from './js/panels/main/Base';\r\nimport Profile from './js/panels/profile/Profile';\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      debug: true,\r\n      activeStory: { view: 'loader', panel: 'loader' },\r\n      activeModal: null,\r\n      pairs: [],\r\n      history: [{\r\n        view: 'loader',\r\n        panel: 'loader'\r\n      }],\r\n      user: undefined,\r\n      userInterests: undefined,\r\n      debugServerInfo: 'default',\r\n      userSettings: undefined\r\n    };\r\n    this.onStoryChange = this.onStoryChange.bind(this);\r\n    this.inited = this.inited.bind(this);\r\n    this.saveUserSettings = this.saveUserSettings.bind(this);\r\n\r\n  }\r\n  componentDidMount() {\r\n    connect.subscribe((e) => {\r\n      switch (e.detail.type) {\r\n        case 'VKWebAppGetUserInfoResult':\r\n          this.setState({ user: e.detail.data });\r\n          var t = this;\r\n          axios.post(`https://salert.info/user/GetUserData`, e.detail.data).then(\r\n            (response) => {\r\n              var debug = t.state.debugServerInfo;\r\n              debug += `GetUserData  ${JSON.stringify(response)}`;\r\n              t.setState({debugServerInfo:debug});\r\n\r\n              t.inited();\r\n              axios.get(`https://salert.info/user/GetUserSettings/${e.detail.data.id}`).then((x) => {\r\n                t.setState({ userSettings: x.data });\r\n                t.inited();\r\n              }).catch((x) =>               \r\n                  t.setState({ userSettings: x })               \r\n               )  \r\n              axios.get(`https://salert.info/interests/GetInterests/${e.detail.data.id}`\r\n              ).then((x) => {\r\n                t.setState({ userInterests: x.data });\r\n                t.inited();\r\n              }).catch(function (x) {\r\n              }); \r\n            }\r\n          ).catch((response) => {\r\n            var debug = t.detail.data;\r\n            debug += JSON.stringify(response);\r\n            t.setState({debugServerInfo:debug});\r\n          });\r\n          break;\r\n          case 'VKWebAppGetUserInfoFailed':           \r\n            var  debug = JSON.stringify(e.detail);\r\n            t.setState({debugServerInfo:debug});\r\n        default:\r\n          console.log(e.detail.type);\r\n      }\r\n    });\r\n    connect.send('VKWebAppGetUserInfo', {});\r\n  }\r\n  saveUserSettings(userSettings){\r\n    var t = this;\r\n    axios.post(`https://salert.info/user/SaveUserSettings`, userSettings).then(\r\n            (response) => {\r\n              t.setState({debugServerInfo:JSON.stringify(response), userSettings:response.data ,activeStory: { view: 'info', panel: 'info' }});\r\n              \r\n            }\r\n          ).catch((response) => {\r\n            t.setState({debugServerInfo:JSON.stringify(response)});\r\n\r\n          });\r\n\r\n  }\r\n  inited() {\r\n    if (this.state.userInterests != undefined && this.state.userSettings != undefined)\r\n      this.setState({ activeStory: { view: 'info', panel: 'info' } });\r\n  }\r\n  onStoryChange(e) {\r\n    var c = this.state.activeStory;\r\n    c.view = e.currentTarget.dataset.view;\r\n    this.setState({ activeStory: c })\r\n  }\r\n  addPair(user) {\r\n    var newPairs = this.state.pairs;\r\n    newPairs.push(user);\r\n\r\n    this.setState({ pairs: newPairs });\r\n  }\r\n\r\n  render() {\r\n    const { user, pairs, userInterests,debugServerInfo, userSettings } = this.state;\r\n\r\n    return (\r\n      <Epic activeStory={this.state.activeStory.view} tabbar={\r\n        <Tabbar>\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory.view === 'info'}\r\n            data-view='info'\r\n            text=\"Профиль\"\r\n          ><Icon28User /></TabbarItem>\r\n\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory.view === 'cards'}\r\n            data-view='cards'\r\n            text=\"Карточки\"\r\n          ><Icon28Users /></TabbarItem>\r\n\r\n\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory.view === 'base'}\r\n            data-view='base'\r\n            label={pairs.length.toString()}\r\n            text=\"Сообщения\"\r\n          ><Icon28Message /></TabbarItem>\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory.view === 'settings'}\r\n            data-view='settings'\r\n            text=\"Настройки\"\r\n          ><Icon28Settings /></TabbarItem>\r\n          <TabbarItem\r\n            onClick={this.onStoryChange}\r\n            selected={this.state.activeStory.view === 'debug'}\r\n            data-view='debug'\r\n            text=\"Дебаг\"\r\n          ><Icon28Settings /></TabbarItem>\r\n        </Tabbar>\r\n      }>\r\n        <View id='loader' popout={<ScreenSpinner />} activePanel=\"loader\">\r\n          <Panel id='loader'>\r\n            <PanelHeader>Загрузка...</PanelHeader>\r\n          </Panel>\r\n        </View>\r\n        <Profile userInterests={userInterests} saveUserSettings={this.saveUserSettings} userSettings={userSettings} id='info' user={user}></Profile>\r\n        <Cards id='cards' addPair={this.addPair} user={user}  userInterests={userInterests}></Cards>\r\n\r\n        <View id='debug' activePanel='debug'>\r\n          <Panel id='debug' >\r\n            <PanelHeader>Debug</PanelHeader>\r\n            <Div>\r\n              {this.state.debugServerInfo}\r\n            </Div>\r\n\r\n          </Panel>\r\n        </View>\r\n\r\n\r\n\r\n      </Epic>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;","import 'core-js/es6/map';\r\nimport 'core-js/es6/set';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport connect from '@vkontakte/vkui-connect';\r\nimport App from './App';\r\n// import registerServiceWorker from './sw';\r\n\r\n// Init VK App\r\nconnect.send('VKWebAppInit', {});\r\n\r\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\r\n// расскомментируйте строку с registerServiceWorker();\r\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\r\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \r\n// registerServiceWorker();\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}